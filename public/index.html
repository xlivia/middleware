<!DOCTYPE html>
<html>

    <head>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="keywords" content="Middleware, Inventory, Create, Read, Update, Delete, Add, List">
        <meta name="description" content="Middleware MongoDB App">

        <link rel="stylesheet" content-type="text/css" href="style.css">

        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

        <title>Middleware</title>

    </head>

    <body>

        <h1>Middleware</h1>
        <h3>MongoDB Database</h3>
        <h4>Computer Parts Inventory System</h4>

        <div class="display-list">
            <h2>List</h2>
            <table id="myTable">
                <thead>
                    <th scope="col">Name</th>
                    <th scope="col">Description</th>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <br>

        <div class="display-add">
            <h2>Add</h2>
            <form method="post" action="/computer/partsdb">
                <label>Add: </label>
                <input type="text" id="name" name="name" placeholder="name" value="CPU">
                <input type="text" id="description" name="description" placeholder="description" value="Central Processing Unit">
                <button id="part-add">Add</button>
            </form>
        </div>

        <div class="display-delete">
            <h2>Delete</h2>
            <form method="post" action="/computer/partsdb">
                <label>Delete: </label>
                <input type="text" id="nametodelete" name="nametodelete" placeholder="name" value="CPU">
                <button id="part-delete">Delete</button>
            </form>
        </div>

        <script>
            $.ajax({
                url: 'http://localhost:8888/computer/partsdb',
                type: 'GET',
                success: (response) => {
                    console.log('success');
                    for (r in response) {
                        data = response[r];
                        var tableRow = "<tr><td>" + data.name + "</td><td>" + data.description + "</td></tr>";
                        $('#myTable').append(tableRow);
                    }
                },
                error: (error) => {
                    console.log('error');
                    console.log(error);
                }
            });
        </script>

    </body>

</html>
